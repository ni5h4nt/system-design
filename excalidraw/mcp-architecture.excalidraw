{
  "type": "excalidraw",
  "version": 2,
  "source": "mcp-system-design",
  "elements": [
    {
      "id": "title",
      "type": "text",
      "x": 350,
      "y": 20,
      "width": 600,
      "height": 45,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "transparent",
      "fillStyle": "solid",
      "strokeWidth": 1,
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "seed": 1,
      "version": 1,
      "versionNonce": 2,
      "isDeleted": false,
      "boundElements": null,
      "updated": 1,
      "link": null,
      "locked": false,
      "groupIds": [],
      "text": "MCP \u2014 System Design Interview",
      "fontSize": 32,
      "fontFamily": 1,
      "textAlign": "center"
    },
    {
      "id": "subtitle",
      "type": "text",
      "x": 350,
      "y": 65,
      "width": 600,
      "height": 25,
      "strokeColor": "#868e96",
      "backgroundColor": "transparent",
      "fillStyle": "solid",
      "strokeWidth": 1,
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "seed": 3,
      "version": 1,
      "versionNonce": 4,
      "isDeleted": false,
      "boundElements": null,
      "updated": 1,
      "link": null,
      "locked": false,
      "groupIds": [],
      "text": "Model Context Protocol \u00b7 75 min",
      "fontSize": 16,
      "fontFamily": 1,
      "textAlign": "center"
    },
    {
      "id": "prompt-box",
      "type": "rectangle",
      "x": 50,
      "y": 120,
      "width": 1200,
      "height": 140,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "#f8f9fa",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "seed": 5,
      "version": 1,
      "versionNonce": 6,
      "isDeleted": false,
      "boundElements": null,
      "updated": 1,
      "link": null,
      "locked": false,
      "groupIds": [],
      "roundness": {
        "type": 3
      }
    },
    {
      "id": "prompt-label",
      "type": "text",
      "x": 70,
      "y": 130,
      "width": 500,
      "height": 25,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "transparent",
      "fillStyle": "solid",
      "strokeWidth": 1,
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "seed": 7,
      "version": 1,
      "versionNonce": 8,
      "isDeleted": false,
      "boundElements": null,
      "updated": 1,
      "link": null,
      "locked": false,
      "groupIds": [],
      "text": "INTERVIEWER PROMPT",
      "fontSize": 18,
      "fontFamily": 1,
      "textAlign": "left"
    },
    {
      "id": "prompt-content",
      "type": "text",
      "x": 70,
      "y": 160,
      "width": 1160,
      "height": 90,
      "strokeColor": "#495057",
      "backgroundColor": "transparent",
      "fillStyle": "solid",
      "strokeWidth": 1,
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "seed": 9,
      "version": 1,
      "versionNonce": 10,
      "isDeleted": false,
      "boundElements": null,
      "updated": 1,
      "link": null,
      "locked": false,
      "groupIds": [],
      "text": "\"Design MCP \u2014 the Model Context Protocol \u2014 an open standard that connects LLM applications\nto external tools, data sources, and prompts. Before MCP, connecting M AI apps to N tools\nrequired M\u00d7N custom integrations. MCP transforms this into M+N: each tool implements one\nMCP server, each AI app implements one MCP client, and they all interoperate.\nThink of it as USB-C for AI: a universal plug that connects any model to any tool.\"",
      "fontSize": 13,
      "fontFamily": 1,
      "textAlign": "left"
    },
    {
      "id": "outcome-box",
      "type": "rectangle",
      "x": 50,
      "y": 290,
      "width": 1200,
      "height": 140,
      "strokeColor": "#e03131",
      "backgroundColor": "#ffe3e3",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "seed": 11,
      "version": 1,
      "versionNonce": 12,
      "isDeleted": false,
      "boundElements": null,
      "updated": 1,
      "link": null,
      "locked": false,
      "groupIds": [],
      "roundness": {
        "type": 3
      }
    },
    {
      "id": "outcome-label",
      "type": "text",
      "x": 70,
      "y": 300,
      "width": 400,
      "height": 25,
      "strokeColor": "#e03131",
      "backgroundColor": "transparent",
      "fillStyle": "solid",
      "strokeWidth": 1,
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "seed": 13,
      "version": 1,
      "versionNonce": 14,
      "isDeleted": false,
      "boundElements": null,
      "updated": 1,
      "link": null,
      "locked": false,
      "groupIds": [],
      "text": "0. CUSTOMER OUTCOME",
      "fontSize": 18,
      "fontFamily": 1,
      "textAlign": "left"
    },
    {
      "id": "outcome-content",
      "type": "text",
      "x": 70,
      "y": 330,
      "width": 1160,
      "height": 90,
      "strokeColor": "#c92a2a",
      "backgroundColor": "transparent",
      "fillStyle": "solid",
      "strokeWidth": 1,
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "seed": 15,
      "version": 1,
      "versionNonce": 16,
      "isDeleted": false,
      "boundElements": null,
      "updated": 1,
      "link": null,
      "locked": false,
      "groupIds": [],
      "text": "Any AI application (Claude Desktop, Cursor, custom agents) can connect to any external tool\n(filesystem, Slack, GitHub, Sentry, databases) through a single standardized protocol.\n\nDevelopers implement ONE MCP server per tool and ONE MCP client per AI app \u2014 eliminating\nthe M\u00d7N integration explosion. Users get seamless, secure, multi-tool AI experiences.",
      "fontSize": 13,
      "fontFamily": 1,
      "textAlign": "left"
    },
    {
      "id": "fr-box",
      "type": "rectangle",
      "x": 50,
      "y": 470,
      "width": 580,
      "height": 280,
      "strokeColor": "#1971c2",
      "backgroundColor": "#d0ebff",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "seed": 17,
      "version": 1,
      "versionNonce": 18,
      "isDeleted": false,
      "boundElements": null,
      "updated": 1,
      "link": null,
      "locked": false,
      "groupIds": [],
      "roundness": {
        "type": 3
      }
    },
    {
      "id": "fr-label",
      "type": "text",
      "x": 70,
      "y": 480,
      "width": 400,
      "height": 25,
      "strokeColor": "#1971c2",
      "backgroundColor": "transparent",
      "fillStyle": "solid",
      "strokeWidth": 1,
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "seed": 19,
      "version": 1,
      "versionNonce": 20,
      "isDeleted": false,
      "boundElements": null,
      "updated": 1,
      "link": null,
      "locked": false,
      "groupIds": [],
      "text": "1. FUNCTIONAL REQUIREMENTS",
      "fontSize": 18,
      "fontFamily": 1,
      "textAlign": "left"
    },
    {
      "id": "fr-content",
      "type": "text",
      "x": 70,
      "y": 510,
      "width": 540,
      "height": 230,
      "strokeColor": "#1864ab",
      "backgroundColor": "transparent",
      "fillStyle": "solid",
      "strokeWidth": 1,
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "seed": 21,
      "version": 1,
      "versionNonce": 22,
      "isDeleted": false,
      "boundElements": null,
      "updated": 1,
      "link": null,
      "locked": false,
      "groupIds": [],
      "text": "\u2022 Tool Discovery & Invocation: servers expose tools\n  via tools/list; LLM calls tools/call with arguments\n\n\u2022 Resource Access: servers expose data via resources/list\n  and resources/read for context injection\n\n\u2022 Prompt Templates: servers expose reusable prompts\n  via prompts/list and prompts/get\n\n\u2022 Sampling: servers can request LLM inference via\n  sampling/createMessage (reverse direction)\n\n\u2022 Multi-Server Host: a single host connects to\n  multiple servers simultaneously (filesystem + GitHub + Slack)\n\n\u2022 Session Lifecycle: initialize \u2192 active \u2192 shutdown\n  with capability negotiation at startup",
      "fontSize": 12,
      "fontFamily": 1,
      "textAlign": "left"
    },
    {
      "id": "nfr-box",
      "type": "rectangle",
      "x": 650,
      "y": 470,
      "width": 600,
      "height": 280,
      "strokeColor": "#2f9e44",
      "backgroundColor": "#b2f2bb",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "seed": 23,
      "version": 1,
      "versionNonce": 24,
      "isDeleted": false,
      "boundElements": null,
      "updated": 1,
      "link": null,
      "locked": false,
      "groupIds": [],
      "roundness": {
        "type": 3
      }
    },
    {
      "id": "nfr-label",
      "type": "text",
      "x": 670,
      "y": 480,
      "width": 400,
      "height": 25,
      "strokeColor": "#2f9e44",
      "backgroundColor": "transparent",
      "fillStyle": "solid",
      "strokeWidth": 1,
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "seed": 25,
      "version": 1,
      "versionNonce": 26,
      "isDeleted": false,
      "boundElements": null,
      "updated": 1,
      "link": null,
      "locked": false,
      "groupIds": [],
      "text": "2. NON-FUNCTIONAL REQUIREMENTS",
      "fontSize": 18,
      "fontFamily": 1,
      "textAlign": "left"
    },
    {
      "id": "nfr-content",
      "type": "text",
      "x": 670,
      "y": 510,
      "width": 560,
      "height": 230,
      "strokeColor": "#2b8a3e",
      "backgroundColor": "transparent",
      "fillStyle": "solid",
      "strokeWidth": 1,
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "seed": 27,
      "version": 1,
      "versionNonce": 28,
      "isDeleted": false,
      "boundElements": null,
      "updated": 1,
      "link": null,
      "locked": false,
      "groupIds": [],
      "text": "Requirement        | Target       | Trade-off\n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500|\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500|\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\nTransport-agnostic | STDIO + HTTP | Protocol complexity\nLocal latency      | <100ms p95   | STDIO only (no net)\nRemote latency     | <2s p95      | HTTP overhead\nBackward compat    | Graceful deg | Capability negotiation\nHuman-in-the-loop  | Host mediates| UX friction\nSecure by default  | OAuth 2.1    | Auth complexity\nCapability negotiation | At init  | Stateful sessions",
      "fontSize": 12,
      "fontFamily": 1,
      "textAlign": "left"
    },
    {
      "id": "ent-box",
      "type": "rectangle",
      "x": 50,
      "y": 790,
      "width": 580,
      "height": 250,
      "strokeColor": "#7048e8",
      "backgroundColor": "#e5dbff",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "seed": 29,
      "version": 1,
      "versionNonce": 30,
      "isDeleted": false,
      "boundElements": null,
      "updated": 1,
      "link": null,
      "locked": false,
      "groupIds": [],
      "roundness": {
        "type": 3
      }
    },
    {
      "id": "ent-label",
      "type": "text",
      "x": 70,
      "y": 800,
      "width": 400,
      "height": 25,
      "strokeColor": "#7048e8",
      "backgroundColor": "transparent",
      "fillStyle": "solid",
      "strokeWidth": 1,
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "seed": 31,
      "version": 1,
      "versionNonce": 32,
      "isDeleted": false,
      "boundElements": null,
      "updated": 1,
      "link": null,
      "locked": false,
      "groupIds": [],
      "text": "3. ENTITIES",
      "fontSize": 18,
      "fontFamily": 1,
      "textAlign": "left"
    },
    {
      "id": "ent-content",
      "type": "text",
      "x": 70,
      "y": 830,
      "width": 540,
      "height": 200,
      "strokeColor": "#6741d9",
      "backgroundColor": "transparent",
      "fillStyle": "solid",
      "strokeWidth": 1,
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "seed": 33,
      "version": 1,
      "versionNonce": 34,
      "isDeleted": false,
      "boundElements": null,
      "updated": 1,
      "link": null,
      "locked": false,
      "groupIds": [],
      "text": "Host          | LLM app (Claude Desktop, Cursor)\n              | creates Clients, mediates all access\n\nClient        | 1:1 connection to a Server\n              | handles JSON-RPC, session state\n\nServer        | exposes Tools, Resources, Prompts\n              | local (STDIO) or remote (HTTP)\n\nTool          | name, inputSchema, annotations\nResource      | URI, mimeType, content\nPrompt        | name, description, arguments\nSession       | capabilities, auth, subscriptions",
      "fontSize": 12,
      "fontFamily": 1,
      "textAlign": "left"
    },
    {
      "id": "api-box",
      "type": "rectangle",
      "x": 650,
      "y": 790,
      "width": 600,
      "height": 250,
      "strokeColor": "#e8590c",
      "backgroundColor": "#ffe8cc",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "seed": 35,
      "version": 1,
      "versionNonce": 36,
      "isDeleted": false,
      "boundElements": null,
      "updated": 1,
      "link": null,
      "locked": false,
      "groupIds": [],
      "roundness": {
        "type": 3
      }
    },
    {
      "id": "api-label",
      "type": "text",
      "x": 670,
      "y": 800,
      "width": 400,
      "height": 25,
      "strokeColor": "#e8590c",
      "backgroundColor": "transparent",
      "fillStyle": "solid",
      "strokeWidth": 1,
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "seed": 37,
      "version": 1,
      "versionNonce": 38,
      "isDeleted": false,
      "boundElements": null,
      "updated": 1,
      "link": null,
      "locked": false,
      "groupIds": [],
      "text": "4. APIs (JSON-RPC 2.0)",
      "fontSize": 18,
      "fontFamily": 1,
      "textAlign": "left"
    },
    {
      "id": "api-content",
      "type": "text",
      "x": 670,
      "y": 830,
      "width": 560,
      "height": 200,
      "strokeColor": "#d9480f",
      "backgroundColor": "transparent",
      "fillStyle": "solid",
      "strokeWidth": 1,
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "seed": 39,
      "version": 1,
      "versionNonce": 40,
      "isDeleted": false,
      "boundElements": null,
      "updated": 1,
      "link": null,
      "locked": false,
      "groupIds": [],
      "text": "Lifecycle:\n  initialize        \u2192 capability negotiation\n  notifications/initialized \u2192 ready signal\n\nTools:\n  tools/list        \u2192 discover available tools\n  tools/call        \u2192 invoke tool with arguments\n\nResources:\n  resources/list    \u2192 list available resources\n  resources/read    \u2192 fetch resource content\n\nPrompts:\n  prompts/list      \u2192 list prompt templates\n  prompts/get       \u2192 render prompt with args\n\nSampling:\n  sampling/createMessage \u2192 server requests LLM",
      "fontSize": 12,
      "fontFamily": 1,
      "textAlign": "left"
    },
    {
      "id": "tech-box",
      "type": "rectangle",
      "x": 50,
      "y": 1080,
      "width": 1200,
      "height": 230,
      "strokeColor": "#1971c2",
      "backgroundColor": "#d0ebff",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "seed": 41,
      "version": 1,
      "versionNonce": 42,
      "isDeleted": false,
      "boundElements": null,
      "updated": 1,
      "link": null,
      "locked": false,
      "groupIds": [],
      "roundness": {
        "type": 3
      }
    },
    {
      "id": "tech-label",
      "type": "text",
      "x": 70,
      "y": 1090,
      "width": 400,
      "height": 25,
      "strokeColor": "#1971c2",
      "backgroundColor": "transparent",
      "fillStyle": "solid",
      "strokeWidth": 1,
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "seed": 43,
      "version": 1,
      "versionNonce": 44,
      "isDeleted": false,
      "boundElements": null,
      "updated": 1,
      "link": null,
      "locked": false,
      "groupIds": [],
      "text": "5. TECH STACK",
      "fontSize": 18,
      "fontFamily": 1,
      "textAlign": "left"
    },
    {
      "id": "tech-dp-label",
      "type": "text",
      "x": 70,
      "y": 1120,
      "width": 200,
      "height": 20,
      "strokeColor": "#1864ab",
      "backgroundColor": "transparent",
      "fillStyle": "solid",
      "strokeWidth": 1,
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "seed": 45,
      "version": 1,
      "versionNonce": 46,
      "isDeleted": false,
      "boundElements": null,
      "updated": 1,
      "link": null,
      "locked": false,
      "groupIds": [],
      "text": "DATA PLANE (Protocol)",
      "fontSize": 14,
      "fontFamily": 1,
      "textAlign": "left"
    },
    {
      "id": "tech-dp",
      "type": "text",
      "x": 70,
      "y": 1145,
      "width": 540,
      "height": 150,
      "strokeColor": "#1864ab",
      "backgroundColor": "transparent",
      "fillStyle": "solid",
      "strokeWidth": 1,
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "seed": 47,
      "version": 1,
      "versionNonce": 48,
      "isDeleted": false,
      "boundElements": null,
      "updated": 1,
      "link": null,
      "locked": false,
      "groupIds": [],
      "text": "\u2022 Wire Format: JSON-RPC 2.0 (bidirectional requests,\n  responses, notifications \u2014 chosen over REST/gRPC)\n\u2022 STDIO Transport: stdin/stdout pipes for local servers\n  (zero setup, sub-ms latency, no port conflicts)\n\u2022 Streamable HTTP Transport: POST for requests,\n  GET+SSE for streaming (works through any proxy/LB)\n\u2022 Message Framing: newline-delimited JSON (STDIO),\n  HTTP request/response + SSE events (remote)",
      "fontSize": 12,
      "fontFamily": 1,
      "textAlign": "left"
    },
    {
      "id": "tech-cp-label",
      "type": "text",
      "x": 670,
      "y": 1120,
      "width": 200,
      "height": 20,
      "strokeColor": "#1864ab",
      "backgroundColor": "transparent",
      "fillStyle": "solid",
      "strokeWidth": 1,
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "seed": 49,
      "version": 1,
      "versionNonce": 50,
      "isDeleted": false,
      "boundElements": null,
      "updated": 1,
      "link": null,
      "locked": false,
      "groupIds": [],
      "text": "CONTROL PLANE (Auth & Sessions)",
      "fontSize": 14,
      "fontFamily": 1,
      "textAlign": "left"
    },
    {
      "id": "tech-cp",
      "type": "text",
      "x": 670,
      "y": 1145,
      "width": 560,
      "height": 150,
      "strokeColor": "#1864ab",
      "backgroundColor": "transparent",
      "fillStyle": "solid",
      "strokeWidth": 1,
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "seed": 51,
      "version": 1,
      "versionNonce": 52,
      "isDeleted": false,
      "boundElements": null,
      "updated": 1,
      "link": null,
      "locked": false,
      "groupIds": [],
      "text": "\u2022 Auth: OAuth 2.1 + PKCE for remote servers\n  (scoped, auditable, revocable \u2014 not API keys)\n\u2022 Local Auth: process-level permissions inherited\n  from host (same user, same filesystem access)\n\u2022 Session Binding: Mcp-Session-Id HTTP header\n  routes requests to stateful server instance\n\u2022 Capability Negotiation: exchanged at initialize,\n  enables graceful degradation across versions\n\u2022 Session State: Redis-backed for scale (caps +\n  subscriptions ~5KB/session, 10M sessions = 50GB)",
      "fontSize": 12,
      "fontFamily": 1,
      "textAlign": "left"
    },
    {
      "id": "arch-bg",
      "type": "rectangle",
      "x": 50,
      "y": 1350,
      "width": 1200,
      "height": 680,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "#f8f9fa",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "seed": 53,
      "version": 1,
      "versionNonce": 54,
      "isDeleted": false,
      "boundElements": null,
      "updated": 1,
      "link": null,
      "locked": false,
      "groupIds": [],
      "roundness": {
        "type": 3
      }
    },
    {
      "id": "arch-label",
      "type": "text",
      "x": 70,
      "y": 1360,
      "width": 500,
      "height": 30,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "transparent",
      "fillStyle": "solid",
      "strokeWidth": 1,
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "seed": 55,
      "version": 1,
      "versionNonce": 56,
      "isDeleted": false,
      "boundElements": null,
      "updated": 1,
      "link": null,
      "locked": false,
      "groupIds": [],
      "text": "6. HIGH-LEVEL ARCHITECTURE",
      "fontSize": 22,
      "fontFamily": 1,
      "textAlign": "left"
    },
    {
      "id": "user-box",
      "type": "rectangle",
      "x": 500,
      "y": 1400,
      "width": 200,
      "height": 50,
      "strokeColor": "#e03131",
      "backgroundColor": "#ffe3e3",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "seed": 57,
      "version": 1,
      "versionNonce": 58,
      "isDeleted": false,
      "boundElements": null,
      "updated": 1,
      "link": null,
      "locked": false,
      "groupIds": [],
      "roundness": {
        "type": 3
      }
    },
    {
      "id": "user-txt",
      "type": "text",
      "x": 530,
      "y": 1410,
      "width": 140,
      "height": 30,
      "strokeColor": "#e03131",
      "backgroundColor": "transparent",
      "fillStyle": "solid",
      "strokeWidth": 1,
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "seed": 59,
      "version": 1,
      "versionNonce": 60,
      "isDeleted": false,
      "boundElements": null,
      "updated": 1,
      "link": null,
      "locked": false,
      "groupIds": [],
      "text": "User / Developer",
      "fontSize": 13,
      "fontFamily": 1,
      "textAlign": "left"
    },
    {
      "id": "arr-user-host",
      "type": "arrow",
      "x": 600,
      "y": 1450,
      "width": 0,
      "height": 40,
      "strokeColor": "#e03131",
      "backgroundColor": "transparent",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "seed": 61,
      "version": 1,
      "versionNonce": 62,
      "isDeleted": false,
      "boundElements": null,
      "updated": 1,
      "link": null,
      "locked": false,
      "groupIds": [],
      "points": [
        [
          0,
          0
        ],
        [
          0,
          40
        ]
      ],
      "startArrowhead": null,
      "endArrowhead": "arrow",
      "lastCommittedPoint": null,
      "startBinding": null,
      "endBinding": null
    },
    {
      "id": "host-box",
      "type": "rectangle",
      "x": 350,
      "y": 1500,
      "width": 500,
      "height": 60,
      "strokeColor": "#1971c2",
      "backgroundColor": "#d0ebff",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "seed": 63,
      "version": 1,
      "versionNonce": 64,
      "isDeleted": false,
      "boundElements": null,
      "updated": 1,
      "link": null,
      "locked": false,
      "groupIds": [],
      "roundness": {
        "type": 3
      }
    },
    {
      "id": "host-txt",
      "type": "text",
      "x": 370,
      "y": 1505,
      "width": 460,
      "height": 50,
      "strokeColor": "#1864ab",
      "backgroundColor": "transparent",
      "fillStyle": "solid",
      "strokeWidth": 1,
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "seed": 65,
      "version": 1,
      "versionNonce": 66,
      "isDeleted": false,
      "boundElements": null,
      "updated": 1,
      "link": null,
      "locked": false,
      "groupIds": [],
      "text": "HOST (Claude Desktop / Cursor / Agent)\nContains LLM + UI + Security Policy",
      "fontSize": 13,
      "fontFamily": 1,
      "textAlign": "left"
    },
    {
      "id": "arr-host-c1",
      "type": "arrow",
      "x": 450,
      "y": 1560,
      "width": 150,
      "height": 50,
      "strokeColor": "#1971c2",
      "backgroundColor": "transparent",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "seed": 67,
      "version": 1,
      "versionNonce": 68,
      "isDeleted": false,
      "boundElements": null,
      "updated": 1,
      "link": null,
      "locked": false,
      "groupIds": [],
      "points": [
        [
          0,
          0
        ],
        [
          -150,
          50
        ]
      ],
      "startArrowhead": null,
      "endArrowhead": "arrow",
      "lastCommittedPoint": null,
      "startBinding": null,
      "endBinding": null
    },
    {
      "id": "arr-host-c2",
      "type": "arrow",
      "x": 600,
      "y": 1560,
      "width": 0,
      "height": 50,
      "strokeColor": "#1971c2",
      "backgroundColor": "transparent",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "seed": 69,
      "version": 1,
      "versionNonce": 70,
      "isDeleted": false,
      "boundElements": null,
      "updated": 1,
      "link": null,
      "locked": false,
      "groupIds": [],
      "points": [
        [
          0,
          0
        ],
        [
          0,
          50
        ]
      ],
      "startArrowhead": null,
      "endArrowhead": "arrow",
      "lastCommittedPoint": null,
      "startBinding": null,
      "endBinding": null
    },
    {
      "id": "arr-host-c3",
      "type": "arrow",
      "x": 750,
      "y": 1560,
      "width": 150,
      "height": 50,
      "strokeColor": "#1971c2",
      "backgroundColor": "transparent",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "seed": 71,
      "version": 1,
      "versionNonce": 72,
      "isDeleted": false,
      "boundElements": null,
      "updated": 1,
      "link": null,
      "locked": false,
      "groupIds": [],
      "points": [
        [
          0,
          0
        ],
        [
          150,
          50
        ]
      ],
      "startArrowhead": null,
      "endArrowhead": "arrow",
      "lastCommittedPoint": null,
      "startBinding": null,
      "endBinding": null
    },
    {
      "id": "client1-box",
      "type": "rectangle",
      "x": 100,
      "y": 1620,
      "width": 200,
      "height": 50,
      "strokeColor": "#7048e8",
      "backgroundColor": "#e5dbff",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "seed": 73,
      "version": 1,
      "versionNonce": 74,
      "isDeleted": false,
      "boundElements": null,
      "updated": 1,
      "link": null,
      "locked": false,
      "groupIds": [],
      "roundness": {
        "type": 3
      }
    },
    {
      "id": "client1-txt",
      "type": "text",
      "x": 120,
      "y": 1630,
      "width": 160,
      "height": 30,
      "strokeColor": "#6741d9",
      "backgroundColor": "transparent",
      "fillStyle": "solid",
      "strokeWidth": 1,
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "seed": 75,
      "version": 1,
      "versionNonce": 76,
      "isDeleted": false,
      "boundElements": null,
      "updated": 1,
      "link": null,
      "locked": false,
      "groupIds": [],
      "text": "MCP Client 1\n(JSON-RPC handler)",
      "fontSize": 11,
      "fontFamily": 1,
      "textAlign": "left"
    },
    {
      "id": "client2-box",
      "type": "rectangle",
      "x": 450,
      "y": 1620,
      "width": 200,
      "height": 50,
      "strokeColor": "#7048e8",
      "backgroundColor": "#e5dbff",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "seed": 77,
      "version": 1,
      "versionNonce": 78,
      "isDeleted": false,
      "boundElements": null,
      "updated": 1,
      "link": null,
      "locked": false,
      "groupIds": [],
      "roundness": {
        "type": 3
      }
    },
    {
      "id": "client2-txt",
      "type": "text",
      "x": 470,
      "y": 1630,
      "width": 160,
      "height": 30,
      "strokeColor": "#6741d9",
      "backgroundColor": "transparent",
      "fillStyle": "solid",
      "strokeWidth": 1,
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "seed": 79,
      "version": 1,
      "versionNonce": 80,
      "isDeleted": false,
      "boundElements": null,
      "updated": 1,
      "link": null,
      "locked": false,
      "groupIds": [],
      "text": "MCP Client 2\n(JSON-RPC handler)",
      "fontSize": 11,
      "fontFamily": 1,
      "textAlign": "left"
    },
    {
      "id": "client3-box",
      "type": "rectangle",
      "x": 850,
      "y": 1620,
      "width": 200,
      "height": 50,
      "strokeColor": "#7048e8",
      "backgroundColor": "#e5dbff",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "seed": 81,
      "version": 1,
      "versionNonce": 82,
      "isDeleted": false,
      "boundElements": null,
      "updated": 1,
      "link": null,
      "locked": false,
      "groupIds": [],
      "roundness": {
        "type": 3
      }
    },
    {
      "id": "client3-txt",
      "type": "text",
      "x": 870,
      "y": 1630,
      "width": 160,
      "height": 30,
      "strokeColor": "#6741d9",
      "backgroundColor": "transparent",
      "fillStyle": "solid",
      "strokeWidth": 1,
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "seed": 83,
      "version": 1,
      "versionNonce": 84,
      "isDeleted": false,
      "boundElements": null,
      "updated": 1,
      "link": null,
      "locked": false,
      "groupIds": [],
      "text": "MCP Client 3\n(JSON-RPC handler)",
      "fontSize": 11,
      "fontFamily": 1,
      "textAlign": "left"
    },
    {
      "id": "transport1-lbl",
      "type": "text",
      "x": 140,
      "y": 1680,
      "width": 120,
      "height": 20,
      "strokeColor": "#868e96",
      "backgroundColor": "transparent",
      "fillStyle": "solid",
      "strokeWidth": 1,
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "seed": 85,
      "version": 1,
      "versionNonce": 86,
      "isDeleted": false,
      "boundElements": null,
      "updated": 1,
      "link": null,
      "locked": false,
      "groupIds": [],
      "text": "STDIO",
      "fontSize": 11,
      "fontFamily": 1,
      "textAlign": "left"
    },
    {
      "id": "transport2-lbl",
      "type": "text",
      "x": 490,
      "y": 1680,
      "width": 120,
      "height": 20,
      "strokeColor": "#868e96",
      "backgroundColor": "transparent",
      "fillStyle": "solid",
      "strokeWidth": 1,
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "seed": 87,
      "version": 1,
      "versionNonce": 88,
      "isDeleted": false,
      "boundElements": null,
      "updated": 1,
      "link": null,
      "locked": false,
      "groupIds": [],
      "text": "Streamable HTTP",
      "fontSize": 11,
      "fontFamily": 1,
      "textAlign": "left"
    },
    {
      "id": "transport3-lbl",
      "type": "text",
      "x": 890,
      "y": 1680,
      "width": 120,
      "height": 20,
      "strokeColor": "#868e96",
      "backgroundColor": "transparent",
      "fillStyle": "solid",
      "strokeWidth": 1,
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "seed": 89,
      "version": 1,
      "versionNonce": 90,
      "isDeleted": false,
      "boundElements": null,
      "updated": 1,
      "link": null,
      "locked": false,
      "groupIds": [],
      "text": "Streamable HTTP",
      "fontSize": 11,
      "fontFamily": 1,
      "textAlign": "left"
    },
    {
      "id": "arr-c1-s1",
      "type": "arrow",
      "x": 200,
      "y": 1700,
      "width": 0,
      "height": 40,
      "strokeColor": "#7048e8",
      "backgroundColor": "transparent",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "seed": 91,
      "version": 1,
      "versionNonce": 92,
      "isDeleted": false,
      "boundElements": null,
      "updated": 1,
      "link": null,
      "locked": false,
      "groupIds": [],
      "points": [
        [
          0,
          0
        ],
        [
          0,
          40
        ]
      ],
      "startArrowhead": null,
      "endArrowhead": "arrow",
      "lastCommittedPoint": null,
      "startBinding": null,
      "endBinding": null
    },
    {
      "id": "arr-c2-s2",
      "type": "arrow",
      "x": 550,
      "y": 1700,
      "width": 0,
      "height": 40,
      "strokeColor": "#7048e8",
      "backgroundColor": "transparent",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "seed": 93,
      "version": 1,
      "versionNonce": 94,
      "isDeleted": false,
      "boundElements": null,
      "updated": 1,
      "link": null,
      "locked": false,
      "groupIds": [],
      "points": [
        [
          0,
          0
        ],
        [
          0,
          40
        ]
      ],
      "startArrowhead": null,
      "endArrowhead": "arrow",
      "lastCommittedPoint": null,
      "startBinding": null,
      "endBinding": null
    },
    {
      "id": "arr-c3-s3",
      "type": "arrow",
      "x": 950,
      "y": 1700,
      "width": 0,
      "height": 40,
      "strokeColor": "#7048e8",
      "backgroundColor": "transparent",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "seed": 95,
      "version": 1,
      "versionNonce": 96,
      "isDeleted": false,
      "boundElements": null,
      "updated": 1,
      "link": null,
      "locked": false,
      "groupIds": [],
      "points": [
        [
          0,
          0
        ],
        [
          0,
          40
        ]
      ],
      "startArrowhead": null,
      "endArrowhead": "arrow",
      "lastCommittedPoint": null,
      "startBinding": null,
      "endBinding": null
    },
    {
      "id": "server1-box",
      "type": "rectangle",
      "x": 100,
      "y": 1750,
      "width": 200,
      "height": 60,
      "strokeColor": "#e8590c",
      "backgroundColor": "#ffe8cc",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "seed": 97,
      "version": 1,
      "versionNonce": 98,
      "isDeleted": false,
      "boundElements": null,
      "updated": 1,
      "link": null,
      "locked": false,
      "groupIds": [],
      "roundness": {
        "type": 3
      }
    },
    {
      "id": "server1-txt",
      "type": "text",
      "x": 110,
      "y": 1755,
      "width": 180,
      "height": 50,
      "strokeColor": "#d9480f",
      "backgroundColor": "transparent",
      "fillStyle": "solid",
      "strokeWidth": 1,
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "seed": 99,
      "version": 1,
      "versionNonce": 100,
      "isDeleted": false,
      "boundElements": null,
      "updated": 1,
      "link": null,
      "locked": false,
      "groupIds": [],
      "text": "Filesystem Server\n(local \u2014 STDIO)\nTools: read, write, search",
      "fontSize": 11,
      "fontFamily": 1,
      "textAlign": "left"
    },
    {
      "id": "server2-box",
      "type": "rectangle",
      "x": 450,
      "y": 1750,
      "width": 200,
      "height": 60,
      "strokeColor": "#e8590c",
      "backgroundColor": "#ffe8cc",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "seed": 101,
      "version": 1,
      "versionNonce": 102,
      "isDeleted": false,
      "boundElements": null,
      "updated": 1,
      "link": null,
      "locked": false,
      "groupIds": [],
      "roundness": {
        "type": 3
      }
    },
    {
      "id": "server2-txt",
      "type": "text",
      "x": 460,
      "y": 1755,
      "width": 180,
      "height": 50,
      "strokeColor": "#d9480f",
      "backgroundColor": "transparent",
      "fillStyle": "solid",
      "strokeWidth": 1,
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "seed": 103,
      "version": 1,
      "versionNonce": 104,
      "isDeleted": false,
      "boundElements": null,
      "updated": 1,
      "link": null,
      "locked": false,
      "groupIds": [],
      "text": "GitHub Server\n(remote \u2014 HTTP+OAuth)\nTools: PR, issues, code",
      "fontSize": 11,
      "fontFamily": 1,
      "textAlign": "left"
    },
    {
      "id": "server3-box",
      "type": "rectangle",
      "x": 850,
      "y": 1750,
      "width": 200,
      "height": 60,
      "strokeColor": "#e8590c",
      "backgroundColor": "#ffe8cc",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "seed": 105,
      "version": 1,
      "versionNonce": 106,
      "isDeleted": false,
      "boundElements": null,
      "updated": 1,
      "link": null,
      "locked": false,
      "groupIds": [],
      "roundness": {
        "type": 3
      }
    },
    {
      "id": "server3-txt",
      "type": "text",
      "x": 860,
      "y": 1755,
      "width": 180,
      "height": 50,
      "strokeColor": "#d9480f",
      "backgroundColor": "transparent",
      "fillStyle": "solid",
      "strokeWidth": 1,
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "seed": 107,
      "version": 1,
      "versionNonce": 108,
      "isDeleted": false,
      "boundElements": null,
      "updated": 1,
      "link": null,
      "locked": false,
      "groupIds": [],
      "text": "Slack Server\n(remote \u2014 HTTP+OAuth)\nTools: send, search, list",
      "fontSize": 11,
      "fontFamily": 1,
      "textAlign": "left"
    },
    {
      "id": "arr-s1-ext",
      "type": "arrow",
      "x": 200,
      "y": 1810,
      "width": 0,
      "height": 40,
      "strokeColor": "#e8590c",
      "backgroundColor": "transparent",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "seed": 109,
      "version": 1,
      "versionNonce": 110,
      "isDeleted": false,
      "boundElements": null,
      "updated": 1,
      "link": null,
      "locked": false,
      "groupIds": [],
      "points": [
        [
          0,
          0
        ],
        [
          0,
          40
        ]
      ],
      "startArrowhead": null,
      "endArrowhead": "arrow",
      "lastCommittedPoint": null,
      "startBinding": null,
      "endBinding": null
    },
    {
      "id": "arr-s2-ext",
      "type": "arrow",
      "x": 550,
      "y": 1810,
      "width": 0,
      "height": 40,
      "strokeColor": "#e8590c",
      "backgroundColor": "transparent",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "seed": 111,
      "version": 1,
      "versionNonce": 112,
      "isDeleted": false,
      "boundElements": null,
      "updated": 1,
      "link": null,
      "locked": false,
      "groupIds": [],
      "points": [
        [
          0,
          0
        ],
        [
          0,
          40
        ]
      ],
      "startArrowhead": null,
      "endArrowhead": "arrow",
      "lastCommittedPoint": null,
      "startBinding": null,
      "endBinding": null
    },
    {
      "id": "arr-s3-ext",
      "type": "arrow",
      "x": 950,
      "y": 1810,
      "width": 0,
      "height": 40,
      "strokeColor": "#e8590c",
      "backgroundColor": "transparent",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "seed": 113,
      "version": 1,
      "versionNonce": 114,
      "isDeleted": false,
      "boundElements": null,
      "updated": 1,
      "link": null,
      "locked": false,
      "groupIds": [],
      "points": [
        [
          0,
          0
        ],
        [
          0,
          40
        ]
      ],
      "startArrowhead": null,
      "endArrowhead": "arrow",
      "lastCommittedPoint": null,
      "startBinding": null,
      "endBinding": null
    },
    {
      "id": "ext1-box",
      "type": "rectangle",
      "x": 120,
      "y": 1860,
      "width": 160,
      "height": 40,
      "strokeColor": "#2f9e44",
      "backgroundColor": "#b2f2bb",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "seed": 115,
      "version": 1,
      "versionNonce": 116,
      "isDeleted": false,
      "boundElements": null,
      "updated": 1,
      "link": null,
      "locked": false,
      "groupIds": [],
      "roundness": {
        "type": 3
      }
    },
    {
      "id": "ext1-txt",
      "type": "text",
      "x": 140,
      "y": 1868,
      "width": 120,
      "height": 25,
      "strokeColor": "#2b8a3e",
      "backgroundColor": "transparent",
      "fillStyle": "solid",
      "strokeWidth": 1,
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "seed": 117,
      "version": 1,
      "versionNonce": 118,
      "isDeleted": false,
      "boundElements": null,
      "updated": 1,
      "link": null,
      "locked": false,
      "groupIds": [],
      "text": "Local Filesystem",
      "fontSize": 11,
      "fontFamily": 1,
      "textAlign": "left"
    },
    {
      "id": "ext2-box",
      "type": "rectangle",
      "x": 470,
      "y": 1860,
      "width": 160,
      "height": 40,
      "strokeColor": "#2f9e44",
      "backgroundColor": "#b2f2bb",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "seed": 119,
      "version": 1,
      "versionNonce": 120,
      "isDeleted": false,
      "boundElements": null,
      "updated": 1,
      "link": null,
      "locked": false,
      "groupIds": [],
      "roundness": {
        "type": 3
      }
    },
    {
      "id": "ext2-txt",
      "type": "text",
      "x": 495,
      "y": 1868,
      "width": 120,
      "height": 25,
      "strokeColor": "#2b8a3e",
      "backgroundColor": "transparent",
      "fillStyle": "solid",
      "strokeWidth": 1,
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "seed": 121,
      "version": 1,
      "versionNonce": 122,
      "isDeleted": false,
      "boundElements": null,
      "updated": 1,
      "link": null,
      "locked": false,
      "groupIds": [],
      "text": "GitHub API",
      "fontSize": 11,
      "fontFamily": 1,
      "textAlign": "left"
    },
    {
      "id": "ext3-box",
      "type": "rectangle",
      "x": 870,
      "y": 1860,
      "width": 160,
      "height": 40,
      "strokeColor": "#2f9e44",
      "backgroundColor": "#b2f2bb",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "seed": 123,
      "version": 1,
      "versionNonce": 124,
      "isDeleted": false,
      "boundElements": null,
      "updated": 1,
      "link": null,
      "locked": false,
      "groupIds": [],
      "roundness": {
        "type": 3
      }
    },
    {
      "id": "ext3-txt",
      "type": "text",
      "x": 900,
      "y": 1868,
      "width": 120,
      "height": 25,
      "strokeColor": "#2b8a3e",
      "backgroundColor": "transparent",
      "fillStyle": "solid",
      "strokeWidth": 1,
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "seed": 125,
      "version": 1,
      "versionNonce": 126,
      "isDeleted": false,
      "boundElements": null,
      "updated": 1,
      "link": null,
      "locked": false,
      "groupIds": [],
      "text": "Slack API",
      "fontSize": 11,
      "fontFamily": 1,
      "textAlign": "left"
    },
    {
      "id": "arch-insight",
      "type": "rectangle",
      "x": 100,
      "y": 1920,
      "width": 1100,
      "height": 40,
      "strokeColor": "#862e9c",
      "backgroundColor": "#f8f0fc",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "seed": 127,
      "version": 1,
      "versionNonce": 128,
      "isDeleted": false,
      "boundElements": null,
      "updated": 1,
      "link": null,
      "locked": false,
      "groupIds": [],
      "roundness": {
        "type": 3
      }
    },
    {
      "id": "arch-insight-txt",
      "type": "text",
      "x": 120,
      "y": 1928,
      "width": 1060,
      "height": 25,
      "strokeColor": "#862e9c",
      "backgroundColor": "transparent",
      "fillStyle": "solid",
      "strokeWidth": 1,
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "seed": 129,
      "version": 1,
      "versionNonce": 130,
      "isDeleted": false,
      "boundElements": null,
      "updated": 1,
      "link": null,
      "locked": false,
      "groupIds": [],
      "text": "KEY INSIGHT: Like LSP for IDEs, MCP turns M\u00d7N integrations into M+N. Host mediates ALL access \u2014 LLM never talks to servers directly.",
      "fontSize": 12,
      "fontFamily": 1,
      "textAlign": "left"
    },
    {
      "id": "arr-sampling",
      "type": "arrow",
      "x": 650,
      "y": 1770,
      "width": 100,
      "height": 210,
      "strokeColor": "#862e9c",
      "backgroundColor": "transparent",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "seed": 131,
      "version": 1,
      "versionNonce": 132,
      "isDeleted": false,
      "boundElements": null,
      "updated": 1,
      "link": null,
      "locked": false,
      "groupIds": [],
      "points": [
        [
          0,
          0
        ],
        [
          -100,
          -210
        ]
      ],
      "startArrowhead": null,
      "endArrowhead": "arrow",
      "lastCommittedPoint": null,
      "startBinding": null,
      "endBinding": null
    },
    {
      "id": "sampling-lbl",
      "type": "text",
      "x": 520,
      "y": 1690,
      "width": 100,
      "height": 15,
      "strokeColor": "#862e9c",
      "backgroundColor": "transparent",
      "fillStyle": "solid",
      "strokeWidth": 1,
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "seed": 133,
      "version": 1,
      "versionNonce": 134,
      "isDeleted": false,
      "boundElements": null,
      "updated": 1,
      "link": null,
      "locked": false,
      "groupIds": [],
      "text": "sampling/\ncreateMessage",
      "fontSize": 10,
      "fontFamily": 1,
      "textAlign": "left"
    },
    {
      "id": "dd1-bg",
      "type": "rectangle",
      "x": 50,
      "y": 2100,
      "width": 1200,
      "height": 380,
      "strokeColor": "#1971c2",
      "backgroundColor": "#f8f9fa",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "seed": 135,
      "version": 1,
      "versionNonce": 136,
      "isDeleted": false,
      "boundElements": null,
      "updated": 1,
      "link": null,
      "locked": false,
      "groupIds": [],
      "roundness": {
        "type": 3
      }
    },
    {
      "id": "dd1-title",
      "type": "text",
      "x": 70,
      "y": 2110,
      "width": 600,
      "height": 30,
      "strokeColor": "#1971c2",
      "backgroundColor": "transparent",
      "fillStyle": "solid",
      "strokeWidth": 1,
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "seed": 137,
      "version": 1,
      "versionNonce": 138,
      "isDeleted": false,
      "boundElements": null,
      "updated": 1,
      "link": null,
      "locked": false,
      "groupIds": [],
      "text": "DEEP DIVE 1: Protocol & Session Lifecycle",
      "fontSize": 22,
      "fontFamily": 1,
      "textAlign": "left"
    },
    {
      "id": "dd1-init",
      "type": "rectangle",
      "x": 80,
      "y": 2155,
      "width": 260,
      "height": 60,
      "strokeColor": "#1971c2",
      "backgroundColor": "#d0ebff",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "seed": 139,
      "version": 1,
      "versionNonce": 140,
      "isDeleted": false,
      "boundElements": null,
      "updated": 1,
      "link": null,
      "locked": false,
      "groupIds": [],
      "roundness": {
        "type": 3
      }
    },
    {
      "id": "dd1-init-t",
      "type": "text",
      "x": 90,
      "y": 2160,
      "width": 240,
      "height": 50,
      "strokeColor": "#1864ab",
      "backgroundColor": "transparent",
      "fillStyle": "solid",
      "strokeWidth": 1,
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "seed": 141,
      "version": 1,
      "versionNonce": 142,
      "isDeleted": false,
      "boundElements": null,
      "updated": 1,
      "link": null,
      "locked": false,
      "groupIds": [],
      "text": "1. INITIALIZE\nClient sends protocolVersion +\ncapabilities; server responds",
      "fontSize": 11,
      "fontFamily": 1,
      "textAlign": "left"
    },
    {
      "id": "dd1-ready",
      "type": "rectangle",
      "x": 360,
      "y": 2155,
      "width": 260,
      "height": 60,
      "strokeColor": "#1971c2",
      "backgroundColor": "#d0ebff",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "seed": 143,
      "version": 1,
      "versionNonce": 144,
      "isDeleted": false,
      "boundElements": null,
      "updated": 1,
      "link": null,
      "locked": false,
      "groupIds": [],
      "roundness": {
        "type": 3
      }
    },
    {
      "id": "dd1-ready-t",
      "type": "text",
      "x": 370,
      "y": 2160,
      "width": 240,
      "height": 50,
      "strokeColor": "#1864ab",
      "backgroundColor": "transparent",
      "fillStyle": "solid",
      "strokeWidth": 1,
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "seed": 145,
      "version": 1,
      "versionNonce": 146,
      "isDeleted": false,
      "boundElements": null,
      "updated": 1,
      "link": null,
      "locked": false,
      "groupIds": [],
      "text": "2. INITIALIZED\nClient sends notification;\nserver can begin sending events",
      "fontSize": 11,
      "fontFamily": 1,
      "textAlign": "left"
    },
    {
      "id": "dd1-active",
      "type": "rectangle",
      "x": 640,
      "y": 2155,
      "width": 260,
      "height": 60,
      "strokeColor": "#1971c2",
      "backgroundColor": "#d0ebff",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "seed": 147,
      "version": 1,
      "versionNonce": 148,
      "isDeleted": false,
      "boundElements": null,
      "updated": 1,
      "link": null,
      "locked": false,
      "groupIds": [],
      "roundness": {
        "type": 3
      }
    },
    {
      "id": "dd1-active-t",
      "type": "text",
      "x": 650,
      "y": 2160,
      "width": 240,
      "height": 50,
      "strokeColor": "#1864ab",
      "backgroundColor": "transparent",
      "fillStyle": "solid",
      "strokeWidth": 1,
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "seed": 149,
      "version": 1,
      "versionNonce": 150,
      "isDeleted": false,
      "boundElements": null,
      "updated": 1,
      "link": null,
      "locked": false,
      "groupIds": [],
      "text": "3. ACTIVE\nBidirectional: tools/call,\nresources/read, notifications",
      "fontSize": 11,
      "fontFamily": 1,
      "textAlign": "left"
    },
    {
      "id": "dd1-shut",
      "type": "rectangle",
      "x": 920,
      "y": 2155,
      "width": 260,
      "height": 60,
      "strokeColor": "#1971c2",
      "backgroundColor": "#d0ebff",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "seed": 151,
      "version": 1,
      "versionNonce": 152,
      "isDeleted": false,
      "boundElements": null,
      "updated": 1,
      "link": null,
      "locked": false,
      "groupIds": [],
      "roundness": {
        "type": 3
      }
    },
    {
      "id": "dd1-shut-t",
      "type": "text",
      "x": 930,
      "y": 2160,
      "width": 240,
      "height": 50,
      "strokeColor": "#1864ab",
      "backgroundColor": "transparent",
      "fillStyle": "solid",
      "strokeWidth": 1,
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "seed": 153,
      "version": 1,
      "versionNonce": 154,
      "isDeleted": false,
      "boundElements": null,
      "updated": 1,
      "link": null,
      "locked": false,
      "groupIds": [],
      "text": "4. SHUTDOWN\nTransport close = session end;\nserver cleans up state",
      "fontSize": 11,
      "fontFamily": 1,
      "textAlign": "left"
    },
    {
      "id": "dd1-arr1",
      "type": "arrow",
      "x": 340,
      "y": 2185,
      "width": 20,
      "height": 0,
      "strokeColor": "#1971c2",
      "backgroundColor": "transparent",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "seed": 155,
      "version": 1,
      "versionNonce": 156,
      "isDeleted": false,
      "boundElements": null,
      "updated": 1,
      "link": null,
      "locked": false,
      "groupIds": [],
      "points": [
        [
          0,
          0
        ],
        [
          20,
          0
        ]
      ],
      "startArrowhead": null,
      "endArrowhead": "arrow",
      "lastCommittedPoint": null,
      "startBinding": null,
      "endBinding": null
    },
    {
      "id": "dd1-arr2",
      "type": "arrow",
      "x": 620,
      "y": 2185,
      "width": 20,
      "height": 0,
      "strokeColor": "#1971c2",
      "backgroundColor": "transparent",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "seed": 157,
      "version": 1,
      "versionNonce": 158,
      "isDeleted": false,
      "boundElements": null,
      "updated": 1,
      "link": null,
      "locked": false,
      "groupIds": [],
      "points": [
        [
          0,
          0
        ],
        [
          20,
          0
        ]
      ],
      "startArrowhead": null,
      "endArrowhead": "arrow",
      "lastCommittedPoint": null,
      "startBinding": null,
      "endBinding": null
    },
    {
      "id": "dd1-arr3",
      "type": "arrow",
      "x": 900,
      "y": 2185,
      "width": 20,
      "height": 0,
      "strokeColor": "#1971c2",
      "backgroundColor": "transparent",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "seed": 159,
      "version": 1,
      "versionNonce": 160,
      "isDeleted": false,
      "boundElements": null,
      "updated": 1,
      "link": null,
      "locked": false,
      "groupIds": [],
      "points": [
        [
          0,
          0
        ],
        [
          20,
          0
        ]
      ],
      "startArrowhead": null,
      "endArrowhead": "arrow",
      "lastCommittedPoint": null,
      "startBinding": null,
      "endBinding": null
    },
    {
      "id": "dd1-why-box",
      "type": "rectangle",
      "x": 80,
      "y": 2235,
      "width": 1140,
      "height": 80,
      "strokeColor": "#862e9c",
      "backgroundColor": "#f8f0fc",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "seed": 161,
      "version": 1,
      "versionNonce": 162,
      "isDeleted": false,
      "boundElements": null,
      "updated": 1,
      "link": null,
      "locked": false,
      "groupIds": [],
      "roundness": {
        "type": 3
      }
    },
    {
      "id": "dd1-why-label",
      "type": "text",
      "x": 100,
      "y": 2240,
      "width": 300,
      "height": 20,
      "strokeColor": "#862e9c",
      "backgroundColor": "transparent",
      "fillStyle": "solid",
      "strokeWidth": 1,
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "seed": 163,
      "version": 1,
      "versionNonce": 164,
      "isDeleted": false,
      "boundElements": null,
      "updated": 1,
      "link": null,
      "locked": false,
      "groupIds": [],
      "text": "WHY STATEFUL (not REST)?",
      "fontSize": 14,
      "fontFamily": 1,
      "textAlign": "left"
    },
    {
      "id": "dd1-why-content",
      "type": "text",
      "x": 100,
      "y": 2260,
      "width": 1100,
      "height": 50,
      "strokeColor": "#862e9c",
      "backgroundColor": "transparent",
      "fillStyle": "solid",
      "strokeWidth": 1,
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "seed": 165,
      "version": 1,
      "versionNonce": 166,
      "isDeleted": false,
      "boundElements": null,
      "updated": 1,
      "link": null,
      "locked": false,
      "groupIds": [],
      "text": "1. Capability negotiation: learn server capabilities ONCE at init (not every request)\n2. Subscriptions: client subscribes to resource changes, receives push notifications (requires persistent session)\n3. Context accumulation: servers maintain state across tool calls (e.g., database transactions)",
      "fontSize": 12,
      "fontFamily": 1,
      "textAlign": "left"
    },
    {
      "id": "dd1-msg-label",
      "type": "text",
      "x": 80,
      "y": 2330,
      "width": 300,
      "height": 20,
      "strokeColor": "#1864ab",
      "backgroundColor": "transparent",
      "fillStyle": "solid",
      "strokeWidth": 1,
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "seed": 167,
      "version": 1,
      "versionNonce": 168,
      "isDeleted": false,
      "boundElements": null,
      "updated": 1,
      "link": null,
      "locked": false,
      "groupIds": [],
      "text": "JSON-RPC 2.0 Message Types:",
      "fontSize": 14,
      "fontFamily": 1,
      "textAlign": "left"
    },
    {
      "id": "dd1-req",
      "type": "rectangle",
      "x": 80,
      "y": 2355,
      "width": 360,
      "height": 50,
      "strokeColor": "#1971c2",
      "backgroundColor": "#d0ebff",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "seed": 169,
      "version": 1,
      "versionNonce": 170,
      "isDeleted": false,
      "boundElements": null,
      "updated": 1,
      "link": null,
      "locked": false,
      "groupIds": [],
      "roundness": {
        "type": 3
      }
    },
    {
      "id": "dd1-req-t",
      "type": "text",
      "x": 90,
      "y": 2360,
      "width": 340,
      "height": 40,
      "strokeColor": "#1864ab",
      "backgroundColor": "transparent",
      "fillStyle": "solid",
      "strokeWidth": 1,
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "seed": 171,
      "version": 1,
      "versionNonce": 172,
      "isDeleted": false,
      "boundElements": null,
      "updated": 1,
      "link": null,
      "locked": false,
      "groupIds": [],
      "text": "Request: {jsonrpc, id, method, params}\nBidirectional \u2014 client\u2192server & server\u2192client",
      "fontSize": 11,
      "fontFamily": 1,
      "textAlign": "left"
    },
    {
      "id": "dd1-resp",
      "type": "rectangle",
      "x": 460,
      "y": 2355,
      "width": 360,
      "height": 50,
      "strokeColor": "#2f9e44",
      "backgroundColor": "#b2f2bb",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "seed": 173,
      "version": 1,
      "versionNonce": 174,
      "isDeleted": false,
      "boundElements": null,
      "updated": 1,
      "link": null,
      "locked": false,
      "groupIds": [],
      "roundness": {
        "type": 3
      }
    },
    {
      "id": "dd1-resp-t",
      "type": "text",
      "x": 470,
      "y": 2360,
      "width": 340,
      "height": 40,
      "strokeColor": "#2b8a3e",
      "backgroundColor": "transparent",
      "fillStyle": "solid",
      "strokeWidth": 1,
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "seed": 175,
      "version": 1,
      "versionNonce": 176,
      "isDeleted": false,
      "boundElements": null,
      "updated": 1,
      "link": null,
      "locked": false,
      "groupIds": [],
      "text": "Response: {jsonrpc, id, result|error}\nMatches request by id; exactly-once",
      "fontSize": 11,
      "fontFamily": 1,
      "textAlign": "left"
    },
    {
      "id": "dd1-notif",
      "type": "rectangle",
      "x": 840,
      "y": 2355,
      "width": 380,
      "height": 50,
      "strokeColor": "#e8590c",
      "backgroundColor": "#ffe8cc",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "seed": 177,
      "version": 1,
      "versionNonce": 178,
      "isDeleted": false,
      "boundElements": null,
      "updated": 1,
      "link": null,
      "locked": false,
      "groupIds": [],
      "roundness": {
        "type": 3
      }
    },
    {
      "id": "dd1-notif-t",
      "type": "text",
      "x": 850,
      "y": 2360,
      "width": 360,
      "height": 40,
      "strokeColor": "#d9480f",
      "backgroundColor": "transparent",
      "fillStyle": "solid",
      "strokeWidth": 1,
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "seed": 179,
      "version": 1,
      "versionNonce": 180,
      "isDeleted": false,
      "boundElements": null,
      "updated": 1,
      "link": null,
      "locked": false,
      "groupIds": [],
      "text": "Notification: {jsonrpc, method, params}\nNo id \u2014 fire-and-forget, no response expected",
      "fontSize": 11,
      "fontFamily": 1,
      "textAlign": "left"
    },
    {
      "id": "dd1-cap-label",
      "type": "text",
      "x": 80,
      "y": 2420,
      "width": 600,
      "height": 20,
      "strokeColor": "#868e96",
      "backgroundColor": "transparent",
      "fillStyle": "solid",
      "strokeWidth": 1,
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "seed": 181,
      "version": 1,
      "versionNonce": 182,
      "isDeleted": false,
      "boundElements": null,
      "updated": 1,
      "link": null,
      "locked": false,
      "groupIds": [],
      "text": "Capability Examples: tools, resources, prompts, sampling, logging, roots",
      "fontSize": 12,
      "fontFamily": 1,
      "textAlign": "left"
    },
    {
      "id": "dd2-bg",
      "type": "rectangle",
      "x": 50,
      "y": 2520,
      "width": 1200,
      "height": 380,
      "strokeColor": "#7048e8",
      "backgroundColor": "#f8f9fa",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "seed": 183,
      "version": 1,
      "versionNonce": 184,
      "isDeleted": false,
      "boundElements": null,
      "updated": 1,
      "link": null,
      "locked": false,
      "groupIds": [],
      "roundness": {
        "type": 3
      }
    },
    {
      "id": "dd2-title",
      "type": "text",
      "x": 70,
      "y": 2530,
      "width": 600,
      "height": 30,
      "strokeColor": "#7048e8",
      "backgroundColor": "transparent",
      "fillStyle": "solid",
      "strokeWidth": 1,
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "seed": 185,
      "version": 1,
      "versionNonce": 186,
      "isDeleted": false,
      "boundElements": null,
      "updated": 1,
      "link": null,
      "locked": false,
      "groupIds": [],
      "text": "DEEP DIVE 2: Primitives & Discovery",
      "fontSize": 22,
      "fontFamily": 1,
      "textAlign": "left"
    },
    {
      "id": "dd2-tools",
      "type": "rectangle",
      "x": 80,
      "y": 2575,
      "width": 360,
      "height": 130,
      "strokeColor": "#1971c2",
      "backgroundColor": "#d0ebff",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "seed": 187,
      "version": 1,
      "versionNonce": 188,
      "isDeleted": false,
      "boundElements": null,
      "updated": 1,
      "link": null,
      "locked": false,
      "groupIds": [],
      "roundness": {
        "type": 3
      }
    },
    {
      "id": "dd2-tools-label",
      "type": "text",
      "x": 90,
      "y": 2580,
      "width": 200,
      "height": 20,
      "strokeColor": "#1971c2",
      "backgroundColor": "transparent",
      "fillStyle": "solid",
      "strokeWidth": 1,
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "seed": 189,
      "version": 1,
      "versionNonce": 190,
      "isDeleted": false,
      "boundElements": null,
      "updated": 1,
      "link": null,
      "locked": false,
      "groupIds": [],
      "text": "TOOLS (Model-Controlled)",
      "fontSize": 14,
      "fontFamily": 1,
      "textAlign": "left"
    },
    {
      "id": "dd2-tools-content",
      "type": "text",
      "x": 90,
      "y": 2605,
      "width": 340,
      "height": 95,
      "strokeColor": "#1864ab",
      "backgroundColor": "transparent",
      "fillStyle": "solid",
      "strokeWidth": 1,
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "seed": 191,
      "version": 1,
      "versionNonce": 192,
      "isDeleted": false,
      "boundElements": null,
      "updated": 1,
      "link": null,
      "locked": false,
      "groupIds": [],
      "text": "LLM decides when to invoke based on intent\nDiscovery: tools/list \u2192 Execution: tools/call\n\nAnnotations provide safety metadata:\n  readOnlyHint, destructiveHint,\n  idempotentHint, openWorldHint\nHost auto-approves safe, confirms destructive",
      "fontSize": 11,
      "fontFamily": 1,
      "textAlign": "left"
    },
    {
      "id": "dd2-resources",
      "type": "rectangle",
      "x": 460,
      "y": 2575,
      "width": 360,
      "height": 130,
      "strokeColor": "#2f9e44",
      "backgroundColor": "#b2f2bb",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "seed": 193,
      "version": 1,
      "versionNonce": 194,
      "isDeleted": false,
      "boundElements": null,
      "updated": 1,
      "link": null,
      "locked": false,
      "groupIds": [],
      "roundness": {
        "type": 3
      }
    },
    {
      "id": "dd2-res-label",
      "type": "text",
      "x": 470,
      "y": 2580,
      "width": 200,
      "height": 20,
      "strokeColor": "#2f9e44",
      "backgroundColor": "transparent",
      "fillStyle": "solid",
      "strokeWidth": 1,
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "seed": 195,
      "version": 1,
      "versionNonce": 196,
      "isDeleted": false,
      "boundElements": null,
      "updated": 1,
      "link": null,
      "locked": false,
      "groupIds": [],
      "text": "RESOURCES (App-Controlled)",
      "fontSize": 14,
      "fontFamily": 1,
      "textAlign": "left"
    },
    {
      "id": "dd2-res-content",
      "type": "text",
      "x": 470,
      "y": 2605,
      "width": 340,
      "height": 95,
      "strokeColor": "#2b8a3e",
      "backgroundColor": "transparent",
      "fillStyle": "solid",
      "strokeWidth": 1,
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "seed": 197,
      "version": 1,
      "versionNonce": 198,
      "isDeleted": false,
      "boundElements": null,
      "updated": 1,
      "link": null,
      "locked": false,
      "groupIds": [],
      "text": "Host decides what to fetch for context\nDiscovery: resources/list \u2192 Read: resources/read\n\nURI-based: file:///src/main.ts\n           db://users/schema\nSafe: read-only data, no approval needed\nCan subscribe to change notifications",
      "fontSize": 11,
      "fontFamily": 1,
      "textAlign": "left"
    },
    {
      "id": "dd2-prompts",
      "type": "rectangle",
      "x": 840,
      "y": 2575,
      "width": 380,
      "height": 130,
      "strokeColor": "#e8590c",
      "backgroundColor": "#ffe8cc",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "seed": 199,
      "version": 1,
      "versionNonce": 200,
      "isDeleted": false,
      "boundElements": null,
      "updated": 1,
      "link": null,
      "locked": false,
      "groupIds": [],
      "roundness": {
        "type": 3
      }
    },
    {
      "id": "dd2-pr-label",
      "type": "text",
      "x": 850,
      "y": 2580,
      "width": 200,
      "height": 20,
      "strokeColor": "#e8590c",
      "backgroundColor": "transparent",
      "fillStyle": "solid",
      "strokeWidth": 1,
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "seed": 201,
      "version": 1,
      "versionNonce": 202,
      "isDeleted": false,
      "boundElements": null,
      "updated": 1,
      "link": null,
      "locked": false,
      "groupIds": [],
      "text": "PROMPTS (User-Controlled)",
      "fontSize": 14,
      "fontFamily": 1,
      "textAlign": "left"
    },
    {
      "id": "dd2-pr-content",
      "type": "text",
      "x": 850,
      "y": 2605,
      "width": 360,
      "height": 95,
      "strokeColor": "#d9480f",
      "backgroundColor": "transparent",
      "fillStyle": "solid",
      "strokeWidth": 1,
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "seed": 203,
      "version": 1,
      "versionNonce": 204,
      "isDeleted": false,
      "boundElements": null,
      "updated": 1,
      "link": null,
      "locked": false,
      "groupIds": [],
      "text": "User explicitly selects from a menu\nDiscovery: prompts/list \u2192 Get: prompts/get\n\nReusable templates with arguments:\n  \"review-pull-request\" {pr_url, focus}\nHost renders template, sends to LLM\nSafest primitive: user-initiated only",
      "fontSize": 11,
      "fontFamily": 1,
      "textAlign": "left"
    },
    {
      "id": "dd2-sampling",
      "type": "rectangle",
      "x": 80,
      "y": 2720,
      "width": 1140,
      "height": 60,
      "strokeColor": "#862e9c",
      "backgroundColor": "#f8f0fc",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "seed": 205,
      "version": 1,
      "versionNonce": 206,
      "isDeleted": false,
      "boundElements": null,
      "updated": 1,
      "link": null,
      "locked": false,
      "groupIds": [],
      "roundness": {
        "type": 3
      }
    },
    {
      "id": "dd2-samp-label",
      "type": "text",
      "x": 100,
      "y": 2725,
      "width": 300,
      "height": 20,
      "strokeColor": "#862e9c",
      "backgroundColor": "transparent",
      "fillStyle": "solid",
      "strokeWidth": 1,
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "seed": 207,
      "version": 1,
      "versionNonce": 208,
      "isDeleted": false,
      "boundElements": null,
      "updated": 1,
      "link": null,
      "locked": false,
      "groupIds": [],
      "text": "SAMPLING (Server-Initiated)",
      "fontSize": 14,
      "fontFamily": 1,
      "textAlign": "left"
    },
    {
      "id": "dd2-samp-content",
      "type": "text",
      "x": 100,
      "y": 2745,
      "width": 1100,
      "height": 30,
      "strokeColor": "#862e9c",
      "backgroundColor": "transparent",
      "fillStyle": "solid",
      "strokeWidth": 1,
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "seed": 209,
      "version": 1,
      "versionNonce": 210,
      "isDeleted": false,
      "boundElements": null,
      "updated": 1,
      "link": null,
      "locked": false,
      "groupIds": [],
      "text": "Reverse direction: server \u2192 client \u2192 host LLM. Server requests the LLM to generate text (e.g., summarize fetched data).\nsampling/createMessage \u2014 host has FULL control: can modify, approve, or deny. Server never gets direct LLM access.",
      "fontSize": 11,
      "fontFamily": 1,
      "textAlign": "left"
    },
    {
      "id": "dd2-insight",
      "type": "rectangle",
      "x": 80,
      "y": 2795,
      "width": 1140,
      "height": 55,
      "strokeColor": "#862e9c",
      "backgroundColor": "#f8f0fc",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "seed": 211,
      "version": 1,
      "versionNonce": 212,
      "isDeleted": false,
      "boundElements": null,
      "updated": 1,
      "link": null,
      "locked": false,
      "groupIds": [],
      "roundness": {
        "type": 3
      }
    },
    {
      "id": "dd2-insight-txt",
      "type": "text",
      "x": 100,
      "y": 2800,
      "width": 1100,
      "height": 45,
      "strokeColor": "#862e9c",
      "backgroundColor": "transparent",
      "fillStyle": "solid",
      "strokeWidth": 1,
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "seed": 213,
      "version": 1,
      "versionNonce": 214,
      "isDeleted": false,
      "boundElements": null,
      "updated": 1,
      "link": null,
      "locked": false,
      "groupIds": [],
      "text": "KEY INSIGHT: Why three primitives instead of \"everything is a tool\"? The control model matters for security.\nTools are DANGEROUS (actions). Resources are SAFE (data). Prompts are USER-INITIATED (templates).\nCollapsing all into tools = host can't distinguish a harmless file read from a destructive database drop.",
      "fontSize": 12,
      "fontFamily": 1,
      "textAlign": "left"
    },
    {
      "id": "dd2-sep",
      "type": "text",
      "x": 80,
      "y": 2865,
      "width": 600,
      "height": 15,
      "strokeColor": "#868e96",
      "backgroundColor": "transparent",
      "fillStyle": "solid",
      "strokeWidth": 1,
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "seed": 215,
      "version": 1,
      "versionNonce": 216,
      "isDeleted": false,
      "boundElements": null,
      "updated": 1,
      "link": null,
      "locked": false,
      "groupIds": [],
      "text": "Each primitive has list (discovery) + get/call (execution) \u2014 consistent API shape",
      "fontSize": 11,
      "fontFamily": 1,
      "textAlign": "left"
    },
    {
      "id": "dd3-bg",
      "type": "rectangle",
      "x": 50,
      "y": 2940,
      "width": 1200,
      "height": 350,
      "strokeColor": "#e8590c",
      "backgroundColor": "#f8f9fa",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "seed": 217,
      "version": 1,
      "versionNonce": 218,
      "isDeleted": false,
      "boundElements": null,
      "updated": 1,
      "link": null,
      "locked": false,
      "groupIds": [],
      "roundness": {
        "type": 3
      }
    },
    {
      "id": "dd3-title",
      "type": "text",
      "x": 70,
      "y": 2950,
      "width": 600,
      "height": 30,
      "strokeColor": "#e8590c",
      "backgroundColor": "transparent",
      "fillStyle": "solid",
      "strokeWidth": 1,
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "seed": 219,
      "version": 1,
      "versionNonce": 220,
      "isDeleted": false,
      "boundElements": null,
      "updated": 1,
      "link": null,
      "locked": false,
      "groupIds": [],
      "text": "DEEP DIVE 3: Transport Layer",
      "fontSize": 22,
      "fontFamily": 1,
      "textAlign": "left"
    },
    {
      "id": "dd3-stdio",
      "type": "rectangle",
      "x": 80,
      "y": 2995,
      "width": 540,
      "height": 150,
      "strokeColor": "#1971c2",
      "backgroundColor": "#d0ebff",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "seed": 221,
      "version": 1,
      "versionNonce": 222,
      "isDeleted": false,
      "boundElements": null,
      "updated": 1,
      "link": null,
      "locked": false,
      "groupIds": [],
      "roundness": {
        "type": 3
      }
    },
    {
      "id": "dd3-stdio-label",
      "type": "text",
      "x": 100,
      "y": 3000,
      "width": 300,
      "height": 20,
      "strokeColor": "#1971c2",
      "backgroundColor": "transparent",
      "fillStyle": "solid",
      "strokeWidth": 1,
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "seed": 223,
      "version": 1,
      "versionNonce": 224,
      "isDeleted": false,
      "boundElements": null,
      "updated": 1,
      "link": null,
      "locked": false,
      "groupIds": [],
      "text": "STDIO TRANSPORT (Local)",
      "fontSize": 14,
      "fontFamily": 1,
      "textAlign": "left"
    },
    {
      "id": "dd3-stdio-content",
      "type": "text",
      "x": 100,
      "y": 3025,
      "width": 500,
      "height": 115,
      "strokeColor": "#1864ab",
      "backgroundColor": "transparent",
      "fillStyle": "solid",
      "strokeWidth": 1,
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "seed": 225,
      "version": 1,
      "versionNonce": 226,
      "isDeleted": false,
      "boundElements": null,
      "updated": 1,
      "link": null,
      "locked": false,
      "groupIds": [],
      "text": "Use case: filesystem, git, database, local tools\nConnection: host spawns server as child process\nLatency: sub-millisecond (pipe IPC)\nSession: implicit \u2014 one process = one session\nAuth: inherits host process permissions\nFraming: newline-delimited JSON on stdout\nMulti-client: NO \u2014 single client per process\n\nWHY: zero setup, no ports, no TLS, no DNS",
      "fontSize": 11,
      "fontFamily": 1,
      "textAlign": "left"
    },
    {
      "id": "dd3-http",
      "type": "rectangle",
      "x": 640,
      "y": 2995,
      "width": 580,
      "height": 150,
      "strokeColor": "#e8590c",
      "backgroundColor": "#ffe8cc",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "seed": 227,
      "version": 1,
      "versionNonce": 228,
      "isDeleted": false,
      "boundElements": null,
      "updated": 1,
      "link": null,
      "locked": false,
      "groupIds": [],
      "roundness": {
        "type": 3
      }
    },
    {
      "id": "dd3-http-label",
      "type": "text",
      "x": 660,
      "y": 3000,
      "width": 300,
      "height": 20,
      "strokeColor": "#e8590c",
      "backgroundColor": "transparent",
      "fillStyle": "solid",
      "strokeWidth": 1,
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "seed": 229,
      "version": 1,
      "versionNonce": 230,
      "isDeleted": false,
      "boundElements": null,
      "updated": 1,
      "link": null,
      "locked": false,
      "groupIds": [],
      "text": "STREAMABLE HTTP TRANSPORT (Remote)",
      "fontSize": 14,
      "fontFamily": 1,
      "textAlign": "left"
    },
    {
      "id": "dd3-http-content",
      "type": "text",
      "x": 660,
      "y": 3025,
      "width": 540,
      "height": 115,
      "strokeColor": "#d9480f",
      "backgroundColor": "transparent",
      "fillStyle": "solid",
      "strokeWidth": 1,
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "seed": 231,
      "version": 1,
      "versionNonce": 232,
      "isDeleted": false,
      "boundElements": null,
      "updated": 1,
      "link": null,
      "locked": false,
      "groupIds": [],
      "text": "Use case: Slack, Sentry, Notion, GitHub, cloud APIs\nConnection: HTTP POST for requests, GET+SSE for streaming\nLatency: 50-2000ms (network round-trip)\nSession: explicit \u2014 Mcp-Session-Id header\nAuth: OAuth 2.1 with PKCE (scoped, revocable)\nFraming: HTTP request/response + SSE event stream\nMulti-client: YES \u2014 one server serves many clients\n\nWHY: works through any proxy/LB/CDN (unlike WebSocket)",
      "fontSize": 11,
      "fontFamily": 1,
      "textAlign": "left"
    },
    {
      "id": "dd3-decision",
      "type": "rectangle",
      "x": 80,
      "y": 3160,
      "width": 1140,
      "height": 50,
      "strokeColor": "#862e9c",
      "backgroundColor": "#f8f0fc",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "seed": 233,
      "version": 1,
      "versionNonce": 234,
      "isDeleted": false,
      "boundElements": null,
      "updated": 1,
      "link": null,
      "locked": false,
      "groupIds": [],
      "roundness": {
        "type": 3
      }
    },
    {
      "id": "dd3-dec-txt",
      "type": "text",
      "x": 100,
      "y": 3165,
      "width": 1100,
      "height": 40,
      "strokeColor": "#862e9c",
      "backgroundColor": "transparent",
      "fillStyle": "solid",
      "strokeWidth": 1,
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "seed": 235,
      "version": 1,
      "versionNonce": 236,
      "isDeleted": false,
      "boundElements": null,
      "updated": 1,
      "link": null,
      "locked": false,
      "groupIds": [],
      "text": "WHY Streamable HTTP over WebSocket? WebSocket requires persistent connections that break through corporate proxies & LBs.\nStreamable HTTP uses standard POST + SSE \u2014 works everywhere. For MCP's workload (few calls/min), HTTP overhead is negligible.",
      "fontSize": 12,
      "fontFamily": 1,
      "textAlign": "left"
    },
    {
      "id": "dd3-same",
      "type": "rectangle",
      "x": 80,
      "y": 3225,
      "width": 1140,
      "height": 40,
      "strokeColor": "#1971c2",
      "backgroundColor": "#d0ebff",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "seed": 237,
      "version": 1,
      "versionNonce": 238,
      "isDeleted": false,
      "boundElements": null,
      "updated": 1,
      "link": null,
      "locked": false,
      "groupIds": [],
      "roundness": {
        "type": 3
      }
    },
    {
      "id": "dd3-same-txt",
      "type": "text",
      "x": 100,
      "y": 3232,
      "width": 1100,
      "height": 25,
      "strokeColor": "#1864ab",
      "backgroundColor": "transparent",
      "fillStyle": "solid",
      "strokeWidth": 1,
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "seed": 239,
      "version": 1,
      "versionNonce": 240,
      "isDeleted": false,
      "boundElements": null,
      "updated": 1,
      "link": null,
      "locked": false,
      "groupIds": [],
      "text": "IDENTICAL JSON-RPC 2.0 messages over BOTH transports \u2014 the data layer is completely decoupled from the transport layer.",
      "fontSize": 13,
      "fontFamily": 1,
      "textAlign": "left"
    },
    {
      "id": "dd4-bg",
      "type": "rectangle",
      "x": 50,
      "y": 3330,
      "width": 1200,
      "height": 370,
      "strokeColor": "#e03131",
      "backgroundColor": "#f8f9fa",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "seed": 241,
      "version": 1,
      "versionNonce": 242,
      "isDeleted": false,
      "boundElements": null,
      "updated": 1,
      "link": null,
      "locked": false,
      "groupIds": [],
      "roundness": {
        "type": 3
      }
    },
    {
      "id": "dd4-title",
      "type": "text",
      "x": 70,
      "y": 3340,
      "width": 600,
      "height": 30,
      "strokeColor": "#e03131",
      "backgroundColor": "transparent",
      "fillStyle": "solid",
      "strokeWidth": 1,
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "seed": 243,
      "version": 1,
      "versionNonce": 244,
      "isDeleted": false,
      "boundElements": null,
      "updated": 1,
      "link": null,
      "locked": false,
      "groupIds": [],
      "text": "DEEP DIVE 4: Auth & Security Model",
      "fontSize": 22,
      "fontFamily": 1,
      "textAlign": "left"
    },
    {
      "id": "dd4-layer1",
      "type": "rectangle",
      "x": 80,
      "y": 3385,
      "width": 360,
      "height": 80,
      "strokeColor": "#e03131",
      "backgroundColor": "#ffe3e3",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "seed": 245,
      "version": 1,
      "versionNonce": 246,
      "isDeleted": false,
      "boundElements": null,
      "updated": 1,
      "link": null,
      "locked": false,
      "groupIds": [],
      "roundness": {
        "type": 3
      }
    },
    {
      "id": "dd4-l1-label",
      "type": "text",
      "x": 90,
      "y": 3390,
      "width": 200,
      "height": 20,
      "strokeColor": "#e03131",
      "backgroundColor": "transparent",
      "fillStyle": "solid",
      "strokeWidth": 1,
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "seed": 247,
      "version": 1,
      "versionNonce": 248,
      "isDeleted": false,
      "boundElements": null,
      "updated": 1,
      "link": null,
      "locked": false,
      "groupIds": [],
      "text": "Layer 1: Host Mediation",
      "fontSize": 14,
      "fontFamily": 1,
      "textAlign": "left"
    },
    {
      "id": "dd4-l1-content",
      "type": "text",
      "x": 90,
      "y": 3410,
      "width": 340,
      "height": 50,
      "strokeColor": "#c92a2a",
      "backgroundColor": "transparent",
      "fillStyle": "solid",
      "strokeWidth": 1,
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "seed": 249,
      "version": 1,
      "versionNonce": 250,
      "isDeleted": false,
      "boundElements": null,
      "updated": 1,
      "link": null,
      "locked": false,
      "groupIds": [],
      "text": "LLM NEVER talks to servers directly.\nHost intercepts every tool call: can\napprove, deny, or modify. This is the\nprimary security boundary.",
      "fontSize": 11,
      "fontFamily": 1,
      "textAlign": "left"
    },
    {
      "id": "dd4-layer2",
      "type": "rectangle",
      "x": 460,
      "y": 3385,
      "width": 360,
      "height": 80,
      "strokeColor": "#e03131",
      "backgroundColor": "#ffe3e3",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "seed": 251,
      "version": 1,
      "versionNonce": 252,
      "isDeleted": false,
      "boundElements": null,
      "updated": 1,
      "link": null,
      "locked": false,
      "groupIds": [],
      "roundness": {
        "type": 3
      }
    },
    {
      "id": "dd4-l2-label",
      "type": "text",
      "x": 470,
      "y": 3390,
      "width": 200,
      "height": 20,
      "strokeColor": "#e03131",
      "backgroundColor": "transparent",
      "fillStyle": "solid",
      "strokeWidth": 1,
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "seed": 253,
      "version": 1,
      "versionNonce": 254,
      "isDeleted": false,
      "boundElements": null,
      "updated": 1,
      "link": null,
      "locked": false,
      "groupIds": [],
      "text": "Layer 2: Transport Auth",
      "fontSize": 14,
      "fontFamily": 1,
      "textAlign": "left"
    },
    {
      "id": "dd4-l2-content",
      "type": "text",
      "x": 470,
      "y": 3410,
      "width": 340,
      "height": 50,
      "strokeColor": "#c92a2a",
      "backgroundColor": "transparent",
      "fillStyle": "solid",
      "strokeWidth": 1,
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "seed": 255,
      "version": 1,
      "versionNonce": 256,
      "isDeleted": false,
      "boundElements": null,
      "updated": 1,
      "link": null,
      "locked": false,
      "groupIds": [],
      "text": "Remote: OAuth 2.1 + PKCE (scoped,\nauditable, revocable per-server).\nLocal: process isolation (same user\npermissions, no network exposure).",
      "fontSize": 11,
      "fontFamily": 1,
      "textAlign": "left"
    },
    {
      "id": "dd4-layer3",
      "type": "rectangle",
      "x": 840,
      "y": 3385,
      "width": 380,
      "height": 80,
      "strokeColor": "#e03131",
      "backgroundColor": "#ffe3e3",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "seed": 257,
      "version": 1,
      "versionNonce": 258,
      "isDeleted": false,
      "boundElements": null,
      "updated": 1,
      "link": null,
      "locked": false,
      "groupIds": [],
      "roundness": {
        "type": 3
      }
    },
    {
      "id": "dd4-l3-label",
      "type": "text",
      "x": 850,
      "y": 3390,
      "width": 200,
      "height": 20,
      "strokeColor": "#e03131",
      "backgroundColor": "transparent",
      "fillStyle": "solid",
      "strokeWidth": 1,
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "seed": 259,
      "version": 1,
      "versionNonce": 260,
      "isDeleted": false,
      "boundElements": null,
      "updated": 1,
      "link": null,
      "locked": false,
      "groupIds": [],
      "text": "Layer 3: Capability Scoping",
      "fontSize": 14,
      "fontFamily": 1,
      "textAlign": "left"
    },
    {
      "id": "dd4-l3-content",
      "type": "text",
      "x": 850,
      "y": 3410,
      "width": 360,
      "height": 50,
      "strokeColor": "#c92a2a",
      "backgroundColor": "transparent",
      "fillStyle": "solid",
      "strokeWidth": 1,
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "seed": 261,
      "version": 1,
      "versionNonce": 262,
      "isDeleted": false,
      "boundElements": null,
      "updated": 1,
      "link": null,
      "locked": false,
      "groupIds": [],
      "text": "Servers declare what they can do.\nClients ONLY invoke declared caps.\nUnknown capabilities are ignored,\nnot errors \u2014 graceful degradation.",
      "fontSize": 11,
      "fontFamily": 1,
      "textAlign": "left"
    },
    {
      "id": "dd4-atk-label",
      "type": "text",
      "x": 80,
      "y": 3480,
      "width": 400,
      "height": 20,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "transparent",
      "fillStyle": "solid",
      "strokeWidth": 1,
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "seed": 263,
      "version": 1,
      "versionNonce": 264,
      "isDeleted": false,
      "boundElements": null,
      "updated": 1,
      "link": null,
      "locked": false,
      "groupIds": [],
      "text": "Known Attack Vectors & Mitigations:",
      "fontSize": 14,
      "fontFamily": 1,
      "textAlign": "left"
    },
    {
      "id": "dd4-atk1",
      "type": "rectangle",
      "x": 80,
      "y": 3505,
      "width": 540,
      "height": 50,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "#f8f9fa",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "seed": 265,
      "version": 1,
      "versionNonce": 266,
      "isDeleted": false,
      "boundElements": null,
      "updated": 1,
      "link": null,
      "locked": false,
      "groupIds": [],
      "roundness": {
        "type": 3
      }
    },
    {
      "id": "dd4-atk1-t",
      "type": "text",
      "x": 90,
      "y": 3510,
      "width": 520,
      "height": 40,
      "strokeColor": "#495057",
      "backgroundColor": "transparent",
      "fillStyle": "solid",
      "strokeWidth": 1,
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "seed": 267,
      "version": 1,
      "versionNonce": 268,
      "isDeleted": false,
      "boundElements": null,
      "updated": 1,
      "link": null,
      "locked": false,
      "groupIds": [],
      "text": "Prompt Injection via tool results: malicious server returns text tricking LLM.\nMitigation: tool results injected as tool-result role; host can scan for patterns.",
      "fontSize": 11,
      "fontFamily": 1,
      "textAlign": "left"
    },
    {
      "id": "dd4-atk2",
      "type": "rectangle",
      "x": 640,
      "y": 3505,
      "width": 580,
      "height": 50,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "#f8f9fa",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "seed": 269,
      "version": 1,
      "versionNonce": 270,
      "isDeleted": false,
      "boundElements": null,
      "updated": 1,
      "link": null,
      "locked": false,
      "groupIds": [],
      "roundness": {
        "type": 3
      }
    },
    {
      "id": "dd4-atk2-t",
      "type": "text",
      "x": 650,
      "y": 3510,
      "width": 560,
      "height": 40,
      "strokeColor": "#495057",
      "backgroundColor": "transparent",
      "fillStyle": "solid",
      "strokeWidth": 1,
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "seed": 271,
      "version": 1,
      "versionNonce": 272,
      "isDeleted": false,
      "boundElements": null,
      "updated": 1,
      "link": null,
      "locked": false,
      "groupIds": [],
      "text": "Tool Squatting: server registers tool with same name as trusted tool.\nMitigation: tools namespaced by server \u2014 host knows which server owns each tool.",
      "fontSize": 11,
      "fontFamily": 1,
      "textAlign": "left"
    },
    {
      "id": "dd4-atk3",
      "type": "rectangle",
      "x": 80,
      "y": 3565,
      "width": 540,
      "height": 50,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "#f8f9fa",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "seed": 273,
      "version": 1,
      "versionNonce": 274,
      "isDeleted": false,
      "boundElements": null,
      "updated": 1,
      "link": null,
      "locked": false,
      "groupIds": [],
      "roundness": {
        "type": 3
      }
    },
    {
      "id": "dd4-atk3-t",
      "type": "text",
      "x": 90,
      "y": 3570,
      "width": 520,
      "height": 40,
      "strokeColor": "#495057",
      "backgroundColor": "transparent",
      "fillStyle": "solid",
      "strokeWidth": 1,
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "seed": 275,
      "version": 1,
      "versionNonce": 276,
      "isDeleted": false,
      "boundElements": null,
      "updated": 1,
      "link": null,
      "locked": false,
      "groupIds": [],
      "text": "Data Exfiltration: malicious tool reads sensitive data from another server.\nMitigation: tools can only access their own server's resources; host controls sequence.",
      "fontSize": 11,
      "fontFamily": 1,
      "textAlign": "left"
    },
    {
      "id": "dd4-atk4",
      "type": "rectangle",
      "x": 640,
      "y": 3565,
      "width": 580,
      "height": 50,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "#f8f9fa",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "seed": 277,
      "version": 1,
      "versionNonce": 278,
      "isDeleted": false,
      "boundElements": null,
      "updated": 1,
      "link": null,
      "locked": false,
      "groupIds": [],
      "roundness": {
        "type": 3
      }
    },
    {
      "id": "dd4-atk4-t",
      "type": "text",
      "x": 650,
      "y": 3570,
      "width": 560,
      "height": 40,
      "strokeColor": "#495057",
      "backgroundColor": "transparent",
      "fillStyle": "solid",
      "strokeWidth": 1,
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "seed": 279,
      "version": 1,
      "versionNonce": 280,
      "isDeleted": false,
      "boundElements": null,
      "updated": 1,
      "link": null,
      "locked": false,
      "groupIds": [],
      "text": "Over-permissioned OAuth: server requests broad scopes it doesn't need.\nMitigation: OAuth consent screen shows exact scopes; grant minimum access.",
      "fontSize": 11,
      "fontFamily": 1,
      "textAlign": "left"
    },
    {
      "id": "dd4-banner",
      "type": "rectangle",
      "x": 80,
      "y": 3630,
      "width": 1140,
      "height": 40,
      "strokeColor": "#862e9c",
      "backgroundColor": "#f8f0fc",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "seed": 281,
      "version": 1,
      "versionNonce": 282,
      "isDeleted": false,
      "boundElements": null,
      "updated": 1,
      "link": null,
      "locked": false,
      "groupIds": [],
      "roundness": {
        "type": 3
      }
    },
    {
      "id": "dd4-banner-txt",
      "type": "text",
      "x": 100,
      "y": 3638,
      "width": 1100,
      "height": 25,
      "strokeColor": "#862e9c",
      "backgroundColor": "transparent",
      "fillStyle": "solid",
      "strokeWidth": 1,
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "seed": 283,
      "version": 1,
      "versionNonce": 284,
      "isDeleted": false,
      "boundElements": null,
      "updated": 1,
      "link": null,
      "locked": false,
      "groupIds": [],
      "text": "DEFENSE IN DEPTH: No single mechanism is sufficient. Host mediation + OAuth + capability scoping + tool annotations = layered security.",
      "fontSize": 12,
      "fontFamily": 1,
      "textAlign": "left"
    },
    {
      "id": "fail-bg",
      "type": "rectangle",
      "x": 50,
      "y": 3740,
      "width": 1200,
      "height": 250,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "#f8f9fa",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "seed": 285,
      "version": 1,
      "versionNonce": 286,
      "isDeleted": false,
      "boundElements": null,
      "updated": 1,
      "link": null,
      "locked": false,
      "groupIds": [],
      "roundness": {
        "type": 3
      }
    },
    {
      "id": "fail-title",
      "type": "text",
      "x": 70,
      "y": 3750,
      "width": 600,
      "height": 30,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "transparent",
      "fillStyle": "solid",
      "strokeWidth": 1,
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "seed": 287,
      "version": 1,
      "versionNonce": 288,
      "isDeleted": false,
      "boundElements": null,
      "updated": 1,
      "link": null,
      "locked": false,
      "groupIds": [],
      "text": "FAILURE SCENARIOS & MONITORING",
      "fontSize": 22,
      "fontFamily": 1,
      "textAlign": "left"
    },
    {
      "id": "fail-content",
      "type": "text",
      "x": 70,
      "y": 3785,
      "width": 1160,
      "height": 190,
      "strokeColor": "#495057",
      "backgroundColor": "transparent",
      "fillStyle": "solid",
      "strokeWidth": 1,
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "seed": 289,
      "version": 1,
      "versionNonce": 290,
      "isDeleted": false,
      "boundElements": null,
      "updated": 1,
      "link": null,
      "locked": false,
      "groupIds": [],
      "text": "Server crash mid-session     \u2192 Client detects broken pipe/HTTP reset; STDIO: auto-restart process; HTTP: reconnect with new session\nRemote server timeout (>30s) \u2192 Client enforces configurable timeout; Streamable HTTP sends progress notifications to keep alive\nVersion mismatch             \u2192 Capability negotiation: server returns supported version; unknown capabilities ignored gracefully\nPrompt injection via results \u2192 Tool results as tool-result role (not system); host scans for injection; defense in depth\nOAuth token expiry           \u2192 Client detects 401; refresh token transparently; if fails: re-auth via OAuth flow; session state preserved\nMalformed JSON-RPC           \u2192 Validate against schema; discard bad messages; repeated violations trigger session restart\n\nKEY SLOs:\n  Local servers: tool call p95 < 100ms | Remote servers: tool call p95 < 2s | Init failure rate < 5% | Tool error rate < 10%\n  Monitor: time-to-first-tool-response, session duration, concurrent sessions, tool calls per conversation",
      "fontSize": 12,
      "fontFamily": 1,
      "textAlign": "left"
    }
  ],
  "appState": {
    "gridSize": null,
    "viewBackgroundColor": "#ffffff"
  },
  "files": {}
}